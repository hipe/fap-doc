directory-index: 5
page-title-short: Code Blocks
page-title: Styling Codeblocks With Metadata.
code-blocks: {*:{class:githubby}, 1:none, 2:js, 7:js, 10:{class:console}}
sidebar: {keyword: note}
<br />

## Understanding Markdown Code Blocks

Daring Fireball markdown syntax supports the idea of [code blocks][dfcb],
which allow you to provide in your markdown files one or more lines indented
by at least 4 spaces or 1 tab,

        ALPHA    GAMMA
             BETA
        ZETAH    CHAIE

which when rendered with fapdoc will by default produce the same html output
that the daring fireball processor will do, which is to wrap the content in
&lt;pre&gt;&lt;code&gt;...&lt;/code&gt;&lt;/pre&gt; tags, producing:

    ALPHA    GAMMA
         BETA
    ZETAH    CHAIE

Boring, innit?  A primary inspriation for fapdoc is to spice-up the
handling of these codeblocks to an absurd degree.


## Turning on Special Code-block Processing

At the time of this writing, every fapdoc feature is experimental and needs to
be enabled explicitly in the [petrify]-style `build.js` file.  To use this one,

    fd.processCodeBlocks();

which tells fapdoc to hack into petrify to add a preprocessor for handling
codeblocks.



## Understanding Code-block Metadata

Thanks to [coalans's WMD markdown parser][wmd] (used by his [petrify], on which
fapdoc is currently married to) you can provide arbitrary metadata at the top of
any of your markdown files.

Document metadata is arbitrary key-value pairs that might look like:

    page-title: Ohai There
    directory-index: 5

Fapdoc will use the `code-blocks` element to decide how you want your
code-blocks processed and rendered on the page.

For example, we can indicate that for the first, second, and third codeblocks
that appear on the page, we want to use CSS classes of `red`, `green`, and
`blue` respectively:

    code-blocks: [{class:red}, {class:green}, {class:blue}]

When you indicate a `class` element there for the individual codeblock metadata,
it simply tells fapdoc to run your codeblock through the daring fireball engine,
and then wrap the results of it in a &lt;div&gt; tag with the class(es) you
indicated.

Rather than using an array-like structure, we can use an object-like
structure, and refer to the offset of which code block we're talking about with
indexes starting from 0:

    code-blocks: { 0:{class:red}, 1:{class:green}, 2:{class:blue}}

(note: the above metadata values are using something we're calling
"_tersified json_" which is essentially json without the unnecessary quotes.

Note that each element of the list corresponds to each codeblock in sequence
that is expected to appear in the markdown document.
This parallelism is a bit ugly and fragile, but ultimately it was decided that
is is better than having *any* view-related markup appear in the body-copy of
the markdown document.  It's sometimes painful to author, but much easier to read; like markdown!)


## Understanding Cascading Metadata

Typically you may want to do the same operations to several (or all) of the
codeblocks in your documents.  A bit like cascading stylesheets, fapdoc
provides you with different levels of scope that you can use to achieve
the desired level of granularity of defining codeblock metadata
without needing to repeat yourself.


### Using the Star Index

In the above array-like syntax, the position of the referred-to codeblock
corresponds to the position of the element in the list.  But we may also refer
to the codeblocks with explicit offset numbers (starting from 0).  Using this
in conjuction with the special `*` index allows us to for example,

    code-blocks: { *:{class:red}, 4:{class:green}, 2:{class:blue} }

which assignings a CSS class `red` to every codeblock on the page except the
fifth (index 4) and third (index 2) ones, which get the `green` and `blue`
classes respectively.


### Site-wide Defaults

The star index above shows you how to indicate page-level defaults for how
your code blocks are handled, but if you have several markdown pages in your
documentation, you might want to specify site-wide defaults too.

Currently the place for site-wide metadata/configuration is in the `build.js`
file.  When you call `fd.processCodeBlocks()` to enable all of this, you can
pass it an object with elements some of whom can be (but not all of whom need to be)
configuration metadata for how to handle code-blocks:

    fd.processCodeBlocks({
      class : 'red'
    });

which tells fapdoc to give each codeblock in the whole site that CSS class,
unless we specify otherwise [1].


## Using fapdoc's Bundled CSS Styles

Fapdoc wants to remain neutral and unopinionated on the issue of how to style
ordinary &lt;`pre`&gt; and &lt;`code`&gt; tags that get generated by your
markdown, to stay out of the way for you
to style them possibly your `style.css` (or other) stylesheets.

However, there are some predefined css styles in the default generated
`style.css`, and if you want to you can associate them with your codeblocks
to get some common (and/or, ahem, handsome) looks.

If you specify a metadata property of `class` alongside no other directives
for handling the codeblock (at this level), fapdoc assumes you just want
to wrap the codeblock in a `div`/`pre`/`code` nest, with that CSS class as
the class for the div.


### Using CSS class `githubby`

One such available CSS class out of the box is "githubby", which is based
off of the styling that at the time of this writing Github does to markdown
codeblocks with its CSS styling (tweaked a bit to look better with our styling,
hence "github*by*").

At the time this sentence was written, here is what the actual metadata
looked like for all the code blocks that appear in this page:

    code-blocks: {*:{class:githubby}, 1:none, 2:js, 8:js}

The above says that for every codeblock other than the ones at offsets 1, 2 and 8 use the 'githubby' CSS class.  The above codeblock itself is renedered in this style.


### Using CSS class `console`

Just like using the CSS class `githubby` above, but use `console`:

    code-blocks: {  ... 10:{class:console} .... }

gets you:

    $ whoami
    fapper
    $



## Using Your Own CSS Styles

Fapdoc doesn't know or care whether or not your `class` parameters for
codeblocks refer to styles in its default `style.css`.  So you can use whatever
classnames you want there in the `class` directive, and then style these
types of codeblocks accordingly (or not) in your CSS files.



## In Summary,

Armed with an understanding of how we associate metadata with codeblocks,
you can use one of the features that fapdoc shines best at, which
is [syntax highlighting] [sh]!

[1]:#fn1
[dfcb]:http://daringfireball.net/projects/markdown/syntax#precode
[petrify]:https://github.com/caolan/petrify
[sh]:(syntax-highlighting.html)
[wmd]:https://github.com/caolan/wmd



### _Footnotes_

<a name='fn1'>1.</a> To be accurate, properties you specify in any metadata
anywhere may or may not be used depending on the actual code-block renderer that
ends up being used for that particular code block.