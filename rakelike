#!/usr/bin/env ruby
require File.dirname(__FILE__)+'/vendor/interface-reflector/rake-like'
# puts "\e[5;35mruby-debug\e[0m"; require 'rubygems'; require 'ruby-debug'

task :"petrify" do |o|
  o.task_class GitTask
  o.desc 'put {src} in {dest_dirname_basename}/'
  o.src 'git://github.com/caolan/petrify.git'
  o.dest "#{File.dirname(__FILE__)}/vendor/petrify"
end

module FapUnit
  class GitTask < Hipe::InterfaceReflector::TaskDefinition
    attr_akksessor :src, :dest
    def execute
      @c.err.puts %x{git clone #{src} #{dest}}
      true
    end
    def dest_dirname_basename
      File.basename(File.dirname(dest))
    end
  end
end
include FapUnit
